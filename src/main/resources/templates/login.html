<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:include="include/include :: head('登录-荣荣打印')"/>
</head>
<body class="hold-transition login-page">
<div class="login-box">

    <div class="login-logo">
        <a href="#"> <b>荣荣打印</b></a>
    </div>
    <br>
    <!-- /.login-logo -->
    <div class="login-box-body">

        <p class="login-box-msg"> <strong>欢迎登录</strong></p>

        <form action="/login" method="post" >

            <div class="alert alert-danger alert-dismissible"  th:if="${msg != null}"  >
                <button type="button" class="close" data-dismiss="alert" aria-hidden="true" >&times;</button>
                <strong th:text="${msg}"></strong>
            </div>

            <div class="form-group has-feedback">
                <input type="text" name="userPhone" class="form-control" placeholder="手机号">
                <span class="glyphicon glyphicon-user form-control-feedback"></span>
            </div>

            <div class="form-group has-feedback">
                <input type="password" name="password" class="form-control" placeholder="密码">
                <span class="glyphicon glyphicon-lock form-control-feedback"></span>
            </div>

            <div class="row">
                <div class="col-xs-8">
                    <div class="checkbox icheck">
                        <label>
                            <input type="checkbox" checked="true" id="rememberUser"> 记住我
                        </label>
                    </div>
                </div>
                <!-- /.col -->
                <div class="col-xs-4">
                    <button id="btn-submit" type="submit" class="btn btn-primary btn-block btn-flat">登录</button>
                </div>
                <!-- /.col -->
            </div>
        </form>

    </div>
</div>

<!-- /.login-box -->
<!-- /.content-wrapper -->
<footer class="modal-footer">
    <div class="pull-right hidden-xs center-block">
        <b>Version</b> 1.6.0
    </div>
    <strong>Copyright &copy; 2020-2021 <a href="/about">荣荣打印</a>.</strong> All rights
    reserved.
</footer>

<th:block th:include="include/include :: foot"/>

<script>
    $(function () {
        $('input').iCheck({
            checkboxClass: 'icheckbox_square-blue',
            radioClass: 'iradio_square-blue',
            increaseArea: '20%' /* optional */
        });
        if($.cookie("rememberUser")) {
            $("#rememberUser").attr("checked", true);
            $("#userPhone").val($.cookie("userPhone"));
            $("#password").val($.cookie("password"));
        };
    });

    $("#btn-submit").on("click", function() {
        var userPhone = $("#userPhone").val();
        var password = $("#password").val();
        var flag = $("#rememberUser").prop("checked");
        if(flag) {
            $.cookie("rememberUser", "true", {
                expires: 7
            });
            $.cookie("userPhone", userPhone, {
                expires: 7
            });
            $.cookie("password", password, {
                expires: 7
            });
            location.href="http://mxue.xyz:9080/";
        } else {
            $.cookie("rememberUser", "false", {
                expires: -1
            });
            $.cookie("userPhone", '', {
                expires: -1
            });
            $.cookie("password", '', {
                expires: -1
            });
        }
    });

</script>
</body>
</html>